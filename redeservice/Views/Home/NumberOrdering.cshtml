@{
    ViewData["Title"] = "Ordenação de Número";
}

<h2>Ordenação de Números</h2>

<div>
    <input type="text" id="numeroInput" />
    <button onclick="adicionarNumero()">Adicionar</button>
</div>

<table>
    <tr>
        <th>Números Ordenados</th>
    </tr>
    <tbody>
        <tr>
            <td id="numbersTable"></td>
        </tr>
    </tbody>
</table>

<button onclick="recordNumbers()">Gravar em arquivo</button>

<script>
    var numbers = [];

    function adicionarNumero() {
        var numeroInput = document.getElementById("numeroInput");
        var numero = parseFloat(numeroInput.value);

        toastr.options.closeButton = true;

        if (!isNaN(numero) && /^[0-9]+(\.[0-9]+)?$/.test(numeroInput.value)) {
            $(document).ready(function () {
                toastr.success('Ação realizada com sucesso!', 'Sucesso');
            });

            numbers.push(numero);
            numeroInput.value = "";

            var numbersTable = document.getElementById("numbersTable");

            var numbersOrderned = numbers.sort(function (a, b) { return a - b; });

            numbersTable.textContent = numbersOrderned.join(", ");
        } else {
            $(document).ready(function () {
                toastr.error('Caracter digitado precisa ser um número válido!', 'Erro');
            });
        }
    }

    function recordNumbers() {
        var numberOrdering = numbers.sort(function (a, b) { return a - b; });
        var numerText = numberOrdering.join('\n');
        var blob = new Blob([numerText], { type: "text/plain" });
        var url = window.URL.createObjectURL(blob);
        var a = document.createElement("a");
        a.href = url;
        a.download = "numeros_ordenar.txt";

        try {
            a.click();
            toastr.success('Números gravados com sucesso!', 'Sucesso');
        } catch (error) {
            toastr.error('Erro ao gravar números.', 'Erro');
        }
    }
</script>
